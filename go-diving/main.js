(()=>{var i=class{constructor(t){this.minutes=t;typeof this.minutes=="string"&&(this.minutes=parseInt(this.minutes,10))}static isValidInput(t){return!!t&&/^\d+$/.test(t)}},l=class{constructor(t){this.minutes=t;if(t<0||t>60)throw new Error(`Invalid wall clock minutes: ${this}`)}},o=class n{static#t=/^(\d{1,2}):(\d{1,2})$/;minutes;hours;constructor(t,e){if(typeof t=="string"?[this.hours,this.minutes]=this.#e(t):typeof t=="number"&&typeof e=="number"&&(this.hours=t,this.minutes=e),this.hours<0||this.hours>23)throw new Error(`Invalid time: ${this}`)}add(t){let e=this.minutes+t.minutes,r=this.hours+(e>=0?Math.floor(e/60):Math.ceil(e/60));return e%=60,e<0&&(e+=60,r--),r<0&&(r+=24),r%=24,new n(r,e)}substract(t){return this.add(new i(-t.minutes))}roundingDownToWallClockMinutes(t){if(t.length<1)throw new Error("Requireing min a value ore more");let e=t.map(s=>s.minutes).sort().reverse();for(let s of e)if(this.minutes>=s)return new n(this.hours,s);let r=e[0],a=this.hours<1?23:this.hours-1;return new n(a,r)}toString(){return`${t(this.hours)}:${t(this.minutes)}`;function t(e){return e<10?"0"+e:""+e}}#e(t){let e=t.match(n.#t);if(!e)throw new Error(`Expected time format is hh:mm, got ${t}`);return[parseInt(e[1],10),parseInt(e[2],10)]}static isValidInput(t){return!!t&&n.#t.test(t)}},p=[new l(0),new l(30)],T=new i(18),f=new i(22);function c(n){let t=n.beAtdDiveSite.substract(n.carTravelTime),e=t.substract(n.preparingTime).roundingDownToWallClockMinutes(p),r=e.substract(T);return[{label:"Feierabend um",value:r.substract(f)+""},{label:"Zug Abfahrt um",value:r+""},{label:"Ankunft zu Hause um",value:e+""},{label:"Abfahrt zu Hause um",value:t+""},{label:"Am Tauchplatz um",value:n.beAtdDiveSite+""}]}var d=document.querySelector("#beAtDiveSite"),h=document.querySelector("#carTravelTime"),b=document.querySelector("#preparingTime");d.addEventListener("keyup",u);h.addEventListener("keyup",u);b.addEventListener("keyup",u);function u(){let n=d.value,t=h.value,e=b.value;if(o.isValidInput(n)&&i.isValidInput(t)&&i.isValidInput(e)){let r=c({beAtdDiveSite:new o(n),carTravelTime:new i(t),preparingTime:new i(e)});m(r)}else m([])}function m(n){let t=document.querySelector("#output");t.innerHTML="<thead><tr><th>Action</hr><th>Time</th></tr></thead><tbody></tbody>";let e=t.tBodies[0];for(let r of n){e.innerHTML+="<tr><td>X</td><td>Y</td></tr>";let a=e.querySelector("tr:last-child td:first-child"),s=e.querySelector("tr:last-child td:last-child");a.textContent=r.label,s.textContent=r.value}}})();
